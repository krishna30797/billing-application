<h4>
  Invoice No : {{invoiceNumber}}
</h4>
<br>
<div class="container">
  <div class="row">
    <div class="col-6">
      <form class="invoice-form" [formGroup]="invoiceDetailsFrom">
        <mat-form-field class="col-lg-12">
          <input matInput type="text" placeholder=" Invoice Description" autocomplete="off"
            formControlName="invoiceDescription">
        </mat-form-field>
        <mat-form-field class="col-lg-12">
          <input matInput [matDatepicker]="picker" formControlName="invoiceDate" placeholder="Choose Invoice date">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

        <mat-form-field class="col-lg-12">
          <input matInput placeholder="Freight Charges" type="number" autocomplete="off"
            formControlName="freightCharges">
        </mat-form-field>
        <mat-form-field class="col-lg-12">
          <input matInput placeholder="Loading Charges" type="number" autocomplete="off"
            formControlName="loadingCharges">
        </mat-form-field>
      </form>
      <div class="row">
        <label class="col-lg-6">
          <span class="spanPadding">Total Price : </span>
          {{totalPrice}}
        </label>
        <label class="col-lg-6">
          <span class="spanPadding">
            Net Price :</span>
          {{NetTotal}}
        </label>
      </div>
      <div class="col-lg-12">
        <button mat-button class="btn col-lg-4 buttonPadding" (click)="OnSave(0)"> <span>Save</span></button>
        <button mat-button class="btn col-lg-4 buttonPadding" (click)="OnSave(1)"
          styleSheetFile="assets/invoice-printdesign.component.css"
       printSectionId="print-section" ngxPrint> <span>Save And Print</span></button>
      </div>
    </div>

    <div class="col-6">
      <form [formGroup]="productForm" (ngSubmit)="onAction()">
        <mat-form-field class="col-lg-12">
          <input type="text" aria-label="Enter Product" placeholder="Enter Product" formControlName="productFilter"
            matInput [matAutocomplete]="auto">
          <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngIf="isLoading" class="is-loading">
              <mat-spinner diameter="50"></mat-spinner>
            </mat-option>
            <ng-container *ngIf="!isLoading">
              <mat-option *ngFor="let option of productSearchData" (onSelectionChange)="selectEvent(option)"
                [value]="option.name">
                {{ option.name }}
              </mat-option>
            </ng-container>
          </mat-autocomplete>
        </mat-form-field>
        <mat-form-field class="col-lg-12">
          <input type="text" matInput placeholder="Product Code" autocomplete="off" formControlName="productCode">
        </mat-form-field>
        <mat-form-field class="col-lg-12">
          <input type="text" matInput placeholder="Product Description" autocomplete="off"
            formControlName="productDescription">
        </mat-form-field>
        <mat-form-field class="col-lg-12">
          <input type="number" matInput placeholder="Price" autocomplete="off" formControlName="price">
        </mat-form-field>
        <mat-form-field class="col-lg-12">
          <input type="number" matInput placeholder="Quantity" autocomplete="off" formControlName="quantity">
        </mat-form-field>
        <div class="col-lg-12">
          <button mat-button class="btn btn-center col-lg-6" type="submit" [disabled]="!productForm.valid">
            <span>Add/Edit Product</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
<br>
<br>
<div class="container scroll-grid">
  <div class="row">
    <div class="col-lg-1"></div>
    <div class="col-lg-10">
      <mat-table [dataSource]="masterData" class="mat-elevation-z8">

        <ng-container matColumnDef="productCode">
          <mat-header-cell *matHeaderCellDef>Product Code </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.productCode}} </mat-cell>
        </ng-container>


        <ng-container matColumnDef="productDescription">
          <mat-header-cell *matHeaderCellDef> Product Description </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.productDescription}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="price">
          <mat-header-cell *matHeaderCellDef> Price </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.price}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="quantity">
          <mat-header-cell *matHeaderCellDef> Quantity </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element.quantity}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="totalPrice">
          <mat-header-cell *matHeaderCellDef> Total Amount </mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.price*element.quantity | number : '1.0-2'}}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="action">
          <mat-header-cell *matHeaderCellDef> Action </mat-header-cell>
          <mat-cell *matCellDef="let element" style="width:20%">
            <button mat-icon-button color="primary" (click)="patchEditForm(element)" title="Edit Product">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button color="primary" (click)="DeleteProduct(element.id)" title="Delete Product">
              <mat-icon>delete</mat-icon>
            </button>
          </mat-cell>
        </ng-container>
        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
      </mat-table>
    </div>
    <div class="col-lg-1"></div>
  </div>
</div>

<div class="print-Section" id="print-section">
  <div class="invoice-title text-center">
    <h4>Karnabhiga Hardware</h4>
  </div>
  <div class="col-xs-12">
    <div class="col-xs-6 text-left" style="float: left;">
      <address>
        <strong>Description : {{invoiceDescription}}</strong>
      </address>
    </div>
    <div class="col-xs-6 text-right" style="float: right;">
      <address>
        <strong>Invoice No: {{invoiceNumber}}</strong><br>
        <strong>Date: {{invoiceDate}}</strong>
      </address>
    </div>
  </div>
  <table class='table table-striped' aria-labelledby="tableLabel">
    <thead class='table productheader'>
      <tr>
        <th class='ptcode text-center'>Product Code</th>
        <th class='ptdesc text-center'>Product Description</th>
        <th class='ptprice text-center'>Price</th>
        <th class='ptquantity text-center'>Quantity</th>
        <th class='ptamount text-right'>Amount</th>
      </tr>
    </thead>
    <tbody class='productbody'>
      <tr *ngFor="let product of masterData" class="row-height">
        <td class='text-center'>{{ product.productCode }}</td>
        <td class='text-center'>{{ product.productDescription }}</td>
        <td class='text-center'>{{ product.price }}</td>
        <td class='text-center'>{{ product.quantity }}</td>
        <td class='text-right'>{{ product.price*product.quantity | number : '1.0-2'}}</td>
      </tr>
      <tr class="row-height">
        <td class="thick-line"></td>
          <td class="thick-line"></td>
          <td class="thick-line"></td>
          <td class="thick-line text-center"><strong>Total Amount:</strong></td>
          <td class="thick-line text-right">{{totalPrice}}</td>
        </tr>
        <tr>
      <tr class="row-height">
        <td class="thick-line"></td>
          <td class="thick-line"></td>
          <td class="thick-line"></td>
          <td class="thick-line text-center"><strong>Freight Charges</strong></td>
          <td class="thick-line text-right">{{FreightCharges}}</td>
        </tr>
        <tr class="row-height">
        <td class="no-line"></td>
          <td class="no-line"></td>
          <td class="no-line"></td>
          <td class="no-line text-center"><strong>Loading Charges:</strong></td>
          <td class="no-line text-right">{{LoadingCharges}}</td>
        </tr>
        <tr class="row-height">
          <td class="no-line"></td>
          <td class="no-line"></td>
          <td class="no-line"></td>
          <td class="no-line text-center"><strong>Net Total:</strong></td>
          <td class="no-line text-right"style="border-top: 2px solid">{{this.NetTotal}}</td>
        </tr>
    </tbody>
  </table>
</div>